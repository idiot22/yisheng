{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/idiot/Documents/yishengproject/yisheng/pages/order-xq/order-xq.vue?3d41","webpack:////Users/idiot/Documents/yishengproject/yisheng/pages/order-xq/order-xq.vue?e989","webpack:////Users/idiot/Documents/yishengproject/yisheng/pages/order-xq/order-xq.vue?efb1","uni-app:///pages/order-xq/order-xq.vue","webpack:////Users/idiot/Documents/yishengproject/yisheng/pages/order-xq/order-xq.vue?5d70","webpack:////Users/idiot/Documents/yishengproject/yisheng/pages/order-xq/order-xq.vue?cb99"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,oG;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACsC;;;AAG7F;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpCA;AAAA;AAAA;AAAA;AAAs0B,CAAgB,syBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsR11B;AACA,iH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,6BACA,6C,eACA,EACA,IADA,kBACA,CACA,SACA,kBADA,EAEA,oDAFA,EAGA,MAHA,EAIA,WACA,gBADA,EAEA,SAFA,EAGA,kBAHA,EAIA,WAJA,EAKA,cACA,EACA,eADA,EAEA,aAFA,EAGA,SAHA,EAIA,UAJA,EAKA,QALA,EAMA,aANA,EAOA,aAPA,EAQA,eARA,EASA,eATA,EADA,CALA,EAkBA,gBAlBA,EAJA,EAwBA,oBACA,oEADA,EAEA,kEAFA,EAGA,kEACA,0DADA,CAHA,EAKA,6DALA,EAMA,qEACA,0DADA,CANA,EAQA,wEACA,0DADA,CARA,EAUA,kEAVA,EAxBA,EAoCA,iBApCA,EAqCA,sBArCA,EAsCA,iBAtCA,EAuCA,mBAvCA,EAwCA,oBAxCA,GA0CA,CA5CA,EA6CA,MA7CA,kBA6CA,MA7CA,EA6CA,kBACA,+BACA,kCACA,wCADA,CAEA;AACA,0BACA,2BACA,CACA,qDACA,+CACA,iCACA,mDACA,qCACA,CALA,EAMA,CA3DA,EA4DA,WACA,MADA,oBACA,oBACA;AACA,0DAFA,CAGA;AACA,mBACA;AACA,8BACA,gDACA,wCACA,CAFA,EAGA,4CACA,iBADA,EAEA,iBAFA,IANA,CAUA;AACA,mDACA,iCACA,+EACA;AACA,+CACA,6EACA,8BACA,iDACA,qBACA,+BACA,wBACA,iBACA,+BADA,IAGA,CAJA,EAIA,IAJA,EAKA,CARA,EAQA,KARA,CAQA,aACA,qBACA,4BACA,CAXA,EAYA,CACA,CAlBA,EAmBA,CApBA,MAoBA,kCACA,2CACA,iDACA,kBACA,CAFA,EAGA,CACA,2EACA,uDACA,mBACA,gFACA,qBACA,+BACA,wBACA,mBACA,CAFA,EAEA,GAFA,EAGA,CANA,EAMA,KANA,CAMA,aACA,qBACA,4BACA,CATA,EAUA,CACA,CACA,CA1DA,EA2DA,+BA3DA,6CA2DA,CACA,wCACA,+BACA,aACA,CACA,iCACA,gCACA,aACA,CACA,2DACA,8CACA,gHACA,4GACA,aACA,CACA,CACA,CACA,YACA,CA7EA,EA8EA,cA9EA,0BA8EA,IA9EA,EA8EA,KA9EA,EA8EA,CACA,0BACA,OACA,CACA,0BACA,gCACA,uBACA,CArFA,EAsFA,YAtFA,wBAsFA,KAtFA,EAsFA,CACA,8FACA,wBACA,CAzFA,EA0FA,UA1FA,wBA0FA,CACA,gCACA,eADA,EAEA,aAFA,EAGA,UAHA,EAIA,QAJA,EAKA,aALA,EAMA,eANA,EAOA,eAPA,IASA,CApGA,EAqGA,wBArGA,sCAqGA,CACA,iDACA,8BACA,uBACA,CACA,CAJA,EAKA,CA3GA,EA4GA,WA5GA,yBA4GA,CACA,iCACA,4CACA,CACA,iCACA,iBADA,EAEA,mBAFA,EAGA,iBAHA,EAIA,gBAJA,EAKA,iBALA,EAMA,kBANA,EAOA,kBAPA,IASA,CAzHA,EA0HA,WA1HA,uBA0HA,KA1HA,EA0HA,CACA,2CACA,CA5HA,EA6HA,UA7HA,sBA6HA,KA7HA,EA6HA,CACA,0CACA,CA/HA,EAgIA,YAhIA,0BAgIA,CACA,iBACA,oEADA,IAGA,CApIA,EAqIA,aArIA,2BAqIA,CACA,iBACA,yHADA,IAGA,CAzIA,EA0IA;AACA,kBA3IA,0BA2IA,IA3IA,EA2IA,CACA,oCACA,uCACA,iCACA,6CACA,qDACA,yCACA,CACA,CAnJA,EA5DA,E;;;;;;;;;;;;;AC1RA;AAAA;AAAA;AAAA;AAAuhD,CAAgB,w5CAAG,EAAC,C;;;;;;;;;;;ACA3iD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/order-xq/order-xq.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/order-xq/order-xq.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order-xq.vue?vue&type=template&id=1e216986&scoped=true&\"\nvar renderjs\nimport script from \"./order-xq.vue?vue&type=script&lang=js&\"\nexport * from \"./order-xq.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order-xq.vue?vue&type=style&index=0&id=1e216986&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1e216986\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order-xq/order-xq.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-xq.vue?vue&type=template&id=1e216986&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.orderXq.productList, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var m0 = _vm.getTotalAmount(item)\n    return {\n      $orig: $orig,\n      m0: m0\n    }\n  })\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.isEditProduct = !_vm.isEditProduct\n    }\n\n    _vm.e1 = function($event) {\n      _vm.paymentPop = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-xq.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-xq.vue?vue&type=script&lang=js&\"","<template>\n\t<div class='order-xq-container'>\n\t\t<div class='order-info'>\n\t\t\t<van-button  v-if='!orderXq.orderId' icon=\"plus\" block type=\"default\" plain  @click='addOrderInfo'>添加订单信息</van-button>\n\t\t\t<div class='order-info-show' v-else>\n\t\t\t\t<van-row>\n\t\t\t\t\t<van-col span='4'>\n\t\t\t\t\t\t<van-row class='left'>\n\t\t\t\t\t\t\t<div class='order-logo'>\n\t\t\t\t\t\t\t\t<van-icon name=\"balance-list\" color='white' size='20px'/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t</van-col>\n\t\t\t\t\t<van-col :span='18' class='middle'>\n\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t<van-col span=\"6\">客户姓名：</van-col>\n\t\t\t\t\t\t\t<van-col class='info' span=\"17\">\n\t\t\t\t\t\t\t\t<p>{{orderXq.customerName}}</p>\n\t\t\t\t\t\t\t</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t<van-col span=\"6\">联系方式：</van-col>\n\t\t\t\t\t\t\t<van-col class='info' span=\"17\">{{orderXq.phone}}</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t<van-col span=\"6\">客户备注：</van-col>\n\t\t\t\t\t\t\t<van-col class='info' span=\"17\">{{orderXq.customerRemark}}</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t<van-col span=\"6\">订单编号：</van-col>\n\t\t\t\t\t\t\t<van-col class='info' span=\"17\">{{orderXq.orderId}}</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t</van-col>\n\t\t\t\t\t<van-col class='right' span='2'>\n\t\t\t\t\t\t<van-icon name=\"arrow\" color='#efefef' size='20px' @click='editOrderInfo'/>\n\t\t\t\t\t</van-col>\n\t\t\t\t</van-row>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class='inorder-detail-wraper'>\n\t\t\t<div class='inorder-content'>\n\t\t\t\t<div class='product-info-content' v-for=\"(item,index) in orderXq.productList\" :key='index'>\n\t\t\t\t\t<div class='product-header'>\n\t\t\t\t\t\t{{'产品'+(index+1)}}\n            <div class='edit-save-icon' @click='isEditProduct=!isEditProduct' v-if=\"index===0 && orderXqType === 'edit'\">\n              <i class='iconfont icon-baocun' v-if='isEditProduct'></i>\n              <i class='iconfont icon-bianji' v-else></i>\n            </div>\n\t\t\t\t\t\t<van-icon class='cross-icon' name=\"cross\"v-if='index!=0' @click='delProduct(index)'/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<van-cell-group>\n\t\t\t\t\t  <cat-field\n            v-model=\"item.productName\"\n\t\t\t\t\t\t:initValue=\"item.productName\"\n            :readonly='!isEditProduct'\n\t\t\t\t\t\tlabel=\"产品名称\"\n\t\t\t\t\t\tplaceholder=\"请输入产品名称\"\n\t\t\t\t\t\t:rules=\"productFormrules.productName\"\n\t\t\t\t\t  />\n\t\t\t\t\t  <cat-field\n\t\t\t\t\t\tv-model=\"item.color\"\n            :initValue='item.color'\n            :readonly='!isEditProduct'\n\t\t\t\t\t\tlabel=\"产品颜色\"\n\t\t\t\t\t\tplaceholder=\"请输入此产品颜色\"\n\t\t\t\t\t\t:border=\"false\"\n\t\t\t\t\t\t:rules=\"productFormrules.color\"\n\t\t\t\t\t  />\n\t\t\t\t\t  <cat-field\n\t\t\t\t\t\tv-model=\"item.modelType\"\n            :initValue=\"item.modelType\"\n            :readonly='!isEditProduct'\n\t\t\t\t\t\tlabel=\"规格型号\"\n\t\t\t\t\t\tplaceholder=\"请输入规格型号\"\n\t\t\t\t\t\t:border=\"false\"\n\t\t\t\t\t\t:rules=\"productFormrules.modelType\"\n\t\t\t\t\t  />\n\t\t\t\t\t  <cat-field\n\t\t\t\t\t\tv-model=\"item.amount\"\n            :initValue=\"item.amount\"\n            :readonly='!isEditProduct'\n\t\t\t\t\t\tlabel=\"产品数量\"\n\t\t\t\t\t\tplaceholder=\"请输入此产品数量\"\n\t\t\t\t\t\t:border=\"false\"\n\t\t\t\t\t\t:rules=\"productFormrules.amount\"\n\t\t\t\t\t  />\n\t\t\t\t\t  <cat-field\n\t\t\t\t\t\tv-model=\"item.unit\"\n            :initValue=\"item.unit\"\n            :readonly='!isEditProduct'\n\t\t\t\t\t\tlabel=\"产品单位\"\n\t\t\t\t\t\tplaceholder=\"请输入此产品单位\"\n\t\t\t\t\t\t:border=\"false\"\n\t\t\t\t\t\t:rules=\"productFormrules.unit\"\n\t\t\t\t\t  />\n\t\t\t\t\t  <cat-field\n\t\t\t\t\t\tv-model=\"item.unitPrice\"\n            :initValue=\"item.unitPrice\"\n            :readonly='!isEditProduct'\n\t\t\t\t\t\tlabel=\"产品单价\"\n\t\t\t\t\t\tplaceholder=\"请输入此产品单价\"\n\t\t\t\t\t\tuse-button-slot\n\t\t\t\t\t\t:rules=\"productFormrules.unitPrice\"\n\t\t\t\t\t\t:border=\"false\">\n\t\t\t\t\t\t<div slot=\"back-info\" size=\"small\" type=\"primary\">\n\t\t\t\t\t\t  元\n\t\t\t\t\t\t</div>\n\t\t\t\t\t  </cat-field>\n\t\t\t\t\t  <cat-field\n\t\t\t\t\t\t:value=\"item.payMethod\"\n            :initValue=\"item.payMethod\"\n\t\t\t\t\t\tlabel=\"支付方式\"\n\t\t\t\t\t\tplaceholder=\"请输入支付方式\"\n\t\t\t\t\t\tuse-button-slot\n\t\t\t\t\t\treadonly='true'\n\t\t\t\t\t\t:rules=\"productFormrules.payMethod\"\n\t\t\t\t\t\t@click.native='showPaymentPop(item, index)'\n\t\t\t\t\t\t:border=\"false\">\n\t\t\t\t\t  </cat-field>\n\t\t\t\t\t  <cat-field\n\t\t\t\t\t\tv-model=\"item.adjustAmount\"\n            :initValue=\"item.adjustAmount\"\n            :readonly='!isEditProduct'\n\t\t\t\t\t\tlabel=\"调整金额\"\n\t\t\t\t\t\tplaceholder=\"请输入此产品的调整金额\"\n\t\t\t\t\t\tuse-button-slot\n\t\t\t\t\t\t:rules=\"productFormrules.adjustAmount\"\n\t\t\t\t\t\t:border=\"false\">\n\t\t\t\t\t\t<div slot=\"back-info\" size=\"small\" type=\"primary\">\n\t\t\t\t\t\t  元\n\t\t\t\t\t\t</div>\n\t\t\t\t\t  </cat-field>\n\t\t\t\t\t  <cat-field\n\t\t\t\t\t\t:value=\"getTotalAmount(item)\"\n\t\t\t\t\t\tlabel=\"产品总价\"\n\t\t\t\t\t\treadonly\n\t\t\t\t\t\tplaceholder=\"请输入此产品总价\"\n\t\t\t\t\t\tuse-button-slot\n\t\t\t\t\t\t:rules=\"productFormrules.totalAmount\"\n\t\t\t\t\t\t:border=\"false\">\n\t\t\t\t\t\t<div slot=\"back-info\" size=\"small\" type=\"primary\">\n\t\t\t\t\t\t  元\n\t\t\t\t\t\t</div>\n\t\t\t\t\t  </cat-field>\n\t\t\t\t\t</van-cell-group>\n\t\t\t\t</div>\n\t\t\t\t<van-button  icon=\"plus\" block \n        color='black' \n        @click='addProduct' \n        v-if=\"orderXqType === 'add' || isEditProduct\">添加产品</van-button>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class='inorder-detail-wraper outorder-detail-wraper' v-if=\"orderXqType === 'edit' && orderXq.deliveryList.length>0\">\n      <div class='inorder-content'>\n        <div class='product-info-content' v-for=\"(item,index) in orderXq.deliveryList\" :key='index'>\n          <div class='product-header'>\n            {{'运单'+(index+1)}}\n            <div class='edit-save-icon' @click='changeDeliveryEditStatus'>\n              <div v-if='item.isEdit !== undefined && index===0'>\n                <i class='iconfont icon-baocun' v-if='item.isEdit'></i>\n                <i class='iconfont icon-bianji' v-else></i>\n              </div>\n              <div style='width: 10px;' v-if='item.isEdit || item.isEdit === undefined'></div>\n              <van-icon class='cross-icon' name=\"cross\" v-if='item.isEdit || item.isEdit === undefined' @click='delDelivery(index)'/>\n            </div>\n          </div>\n          <van-cell-group>\n            <cat-field\n            v-model=\"item.expressNumber\"\n            :initValue=\"item.expressNumber\"\n            :readonly='!item.isEdit && item.isEdit !== undefined '\n            label=\"运单号\"\n            placeholder=\"请输入运单号\"\n            :border=\"false\"\n            :rules=\"productFormrules.unit\"\n            />\n            <cat-field\n            v-model=\"item.deliveryAddress\"\n            :initValue=\"item.deliveryAddress\"\n            :readonly='!item.isEdit && item.isEdit !== undefined '\n            label=\"送货地址\"\n            placeholder=\"请输入送货地址\"\n            :border=\"false\"\n            :rules=\"productFormrules.unit\"\n            />\n            <cat-field\n            v-model=\"item.expressAmount\"\n            :initValue=\"item.expressAmount\"\n            :readonly='!item.isEdit && item.isEdit !== undefined '\n            label=\"运费金额\"\n            placeholder=\"请输入运费金额\"\n            :border=\"false\"\n            :rules=\"productFormrules.unit\"\n            />\n            <cat-field\n            v-model=\"item.expressPayer\"\n            :initValue=\"item.expressPayer\"\n            :readonly='!item.isEdit && item.isEdit !== undefined '\n            label=\"运费付款人\"\n            placeholder=\"请输入运费付款人\"\n            :border=\"false\"\n            :rules=\"productFormrules.unit\"\n            />\n            <cat-field\n            v-model=\"item.transportMode\"\n            :initValue=\"item.transportMode\"\n            :readonly='!item.isEdit && item.isEdit !== undefined '\n            label=\"运输方式\"\n            placeholder=\"请输入运输方式\"\n            :border=\"false\"\n            :rules=\"productFormrules.unit\"\n            />\n            <cat-field\n            v-model=\"item.outorderPerson\"\n            :initValue=\"item.outorderPerson\"\n            :readonly='!item.isEdit && item.isEdit !== undefined '\n            label=\"出库人\"\n            placeholder=\"请输入出库人\"\n            :border=\"false\"\n            :rules=\"productFormrules.unit\"\n            />\n            <cat-field\n            v-model=\"item.outorderRemark\"\n            :initValue=\"item.outorderRemark\"\n            :readonly='!item.isEdit && item.isEdit !== undefined '\n            label=\"备注\"\n            placeholder=\"请输入备注\"\n            :border=\"false\"\n            :rules=\"productFormrules.unit\"\n            />\n          </van-cell-group>\n        </div>\n      </div>\n    </div>\n    <div class='btn-wraper'>\n      <van-button class='submit-btn' \n        type=\"default\" \n        block plain \n        @click='submit' \n        v-if=\"orderXqType === 'add'\">\n        保存\n      </van-button>\n      <van-button\n        class='submit-btn' \n        block\n        icon=\"plus\"\n        type=\"default\"\n        color='black'\n        @click='addDelivery' \n        v-if=\"orderXqType === 'edit'\">\n        添加出库信息\n      </van-button>\n      <van-button \n        class='submit-btn' \n        block plain\n        type=\"default\"\n        @click='submit' \n        v-if=\"orderXqType === 'edit'\">\n        保存\n      </van-button>\n    </div>\n    <div class='pop-wraper'>\n\t\t\t<van-popup\n\t\t\t  :show=\"paymentPop\"\n\t\t\t  position=\"bottom\"\n\t\t\t  custom-style=\"height: 50%;\"\n\t\t\t  @close=\"paymentPop = false\">\n\t\t\t  <van-picker\n\t\t\t  show-toolbar\n\t\t\t  :columns=\"payMethodList\" \n\t\t\t  @confirm=\"getPayMethod\"/>\n\t\t\t</van-popup>\n\t\t</div>\n\t\t<van-toast id=\"van-toast\" />\n\t</div>\n</template>\n\n<script>\n\timport { dateFormat } from '../../utils/index.js'\n\timport Toast from '../../wxcomponents/vant-weapp/toast/toast.js'\n\tconst db = uniCloud.database();\n\tconst collection = db.collection(\"order-info\")\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n        orderXqType: 'add',\n\t\t\t\tpayMethodList:['艺盛淘宝','创盈淘宝','阿里巴巴','拼多多','微信'],\n\t\t\t\tid:'',\n        orderXq:{\n          customerName:'',\n          phone:'',\n          customerRemark:'',\n          orderId:'',\n          productList:[\n            {\n            \tproductName:'',\n            \tmodelType:'',\n            \tcolor:'',\n            \tamount:'',\n            \tunit:'',\n            \tunitPrice:'',\n            \tpayMethod:'',\n            \ttotalAmount:'',\n            \tadjustAmount: 0,\n            }\n          ],\n          deliveryList:[]\n        },\n\t\t\t\tproductFormrules:{\n\t\t\t\t\tproductName: { required: true, message: '请输入产品名称', trigger: 'blur' },\n\t\t\t\t\tmodelType: { required: true, message: '请输入规格型号', trigger: 'blur' },\n\t\t\t\t\tamount:[{ required: true, message: '请输入产品数量', trigger: 'blur' },\n\t\t\t\t\t\t  { type: 'number', message: '请输入正确的产品数量', trigger: 'blur' }],\n\t\t\t\t\tunit:{ required: true, message: '请输入产品单位', trigger: 'blur' },\n\t\t\t\t\tunitPrice: [{ required: true, message: '请输入产品单价', trigger: 'blur' },\n\t\t\t\t\t\t  { type: 'number', message: '请输入正确的产品单价', trigger: 'blur' }],\n\t\t\t\t\tadjustAmount: [{ required: true, message: '请输入调整金额', trigger: 'blur' },\n\t\t\t\t\t\t{ type: 'number', message: '请输入正确的调整金额', trigger: 'blur' }],\n\t\t\t\t\tpayMethod: { required: true, message: '请输入支付方式', trigger: 'blur' }\n\t\t\t\t},\n\t\t\t\tselectProduct:{},\n\t\t\t\tselectProductIndex:-1,\n\t\t\t\tpaymentPop:false,\n        isEditProduct: true,\n        isEditDelivery: true\n\t\t\t}\n\t\t},\n\t\tonLoad(option){\n      this.orderXqType = option.type\n      if(this.orderXqType === 'edit'){\n        this.orderXq = JSON.parse(option.order)\n        // 解决不知道什么原因导致的列表数据不渲染\n        this.$forceUpdate()\n        this.isEditProduct = false\n      }\n\t\t\tthis.$eventBus.$on('saveOrderInfo',(data)=>{\n\t\t\t\tthis.orderXq.customerName = data.customerName\n        this.orderXq.phone = data.phone\n        this.orderXq.customerRemark = data.customerRemark\n        this.orderXq.orderId = data.orderId\n\t\t\t})\n\t\t},\n\t\tmethods: {\n\t\t\tsubmit(){\n\t\t\t\t// 校验\n\t\t\t\tlet valide = this.productListAndBasicInfoValidate()\n\t\t\t\t// 调保存接口\n\t\t\t\tif(valide){\n\t\t\t\t\t// 计算订单总额\n\t\t\t\t\tlet allTotalPrice = 0\n\t\t\t\t\tthis.orderXq.productList.forEach(it => {\n\t\t\t\t\t\tallTotalPrice += Number(it.totalAmount)\n\t\t\t\t\t})\n\t\t\t\t\tlet loadingToast = Toast.loading({\n\t\t\t\t\t  message: '保存中...',\n\t\t\t\t\t  forbidClick: true,\n\t\t\t\t\t})\n\t\t\t\t\t// 给数据库添加数据\n          this.orderXq.allTotalPrice = allTotalPrice\n          if(this.orderXqType === 'add'){\n            collection.where({orderId: this.orderXq.orderId}).get().then((res)=>{\n              // 避免多次提交数据，以orderId来判断是否重复请求\n              if(res.result.data.length === 0){\n                this.orderXq.createTime = dateFormat('YYYY-mm-dd',new Date())\n                this.orderXq.status = '未出库'\n                collection.add(this.orderXq).then(()=>{\n                    loadingToast.clear()\n                    Toast.success('保存成功');\n                    setTimeout(()=>{\n                      uni.navigateTo({\n                        url: '../order-list/order-list'\n                      })\n                    },1000)\n                  }).catch(()=>{\n                    loadingToast.clear()\n                    Toast.fail('保存失败');\n                  })\n              }\n            })\n          } else if(this.orderXqType === 'edit'){\n              if(this.orderXq.deliveryList.length>0){\n                this.orderXq.deliveryList.forEach((it)=>{\n                  it.isEdit = false\n                })\n              }\n              this.orderXq.updateTime = dateFormat('YYYY-mm-dd',new Date())\n              let orderXq = JSON.parse(JSON.stringify(this.orderXq))\n              delete orderXq._id\n              collection.where({\"_id\": this.orderXq._id}).update(orderXq).then(()=>{\n                loadingToast.clear()\n                Toast.success('保存成功');\n                setTimeout(()=>{\n                  uni.navigateBack()\n                },500)\n              }).catch(()=>{\n                loadingToast.clear()\n                Toast.fail('保存失败');\n              })\n           }\n\t\t\t\t}\n\t\t\t},\n\t\t\tproductListAndBasicInfoValidate(){\n\t\t\t\tif(!Object.keys(this.orderXq).length){\n\t\t\t\t\tToast('请添加订单信息')\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif(!this.orderXq.customerName){\n\t\t\t\t\tToast('客户姓名不能为空')\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tfor(let i=0;i<this.orderXq.productList.length;i++){\n\t\t\t\t\tfor(let key in this.orderXq.productList[i]){\n\t\t\t\t\t\tif(this.productFormrules[key] && !this.orderXq.productList[i][key] && this.orderXq.productList[i][key]!==0){\n\t\t\t\t\t\t\tToast(`${this.productFormrules[key].message || this.productFormrules[key][0].message}`)\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t},\n\t\t\tshowPaymentPop(item, index){\n        if(!this.isEditProduct){\n          return\n        }\n\t\t\t\tthis.selectProduct = item\n\t\t\t\tthis.selectProductIndex = index\n\t\t\t\tthis.paymentPop = true\n\t\t\t},\n\t\t\tgetPayMethod(event){\n\t\t\t\tthis.$set(this.orderXq.productList[this.selectProductIndex],'payMethod',event.detail.value)\n\t\t\t\tthis.paymentPop = false\n\t\t\t},\n\t\t\taddProduct(){\n\t\t\t\tthis.orderXq.productList.push({\n\t\t\t\t\tproductname:'',\n\t\t\t\t\tmodelType:'',\n\t\t\t\t\tamount:'',\n\t\t\t\t\tunit:'',\n\t\t\t\t\tunitPrice:'',\n\t\t\t\t\ttotalAmount:'',\n\t\t\t\t\tadjustAmount:0\n\t\t\t\t})\n\t\t\t},\n      changeDeliveryEditStatus(){\n        this.orderXq.deliveryList.forEach(it=>{\n          if(it.isEdit !== undefined){\n            it.isEdit = !it.isEdit\n          }\n        })\n      },\n      addDelivery(){\n        if(!this.orderXq.deliveryList){\n          this.$set(this.orderXq,'deliveryList',[])\n        }\n        this.orderXq.deliveryList.push({\n        \texpressNumber:'',\n        \tdeliveryAddress:'',\n        \texpressAmount:'',\n        \texpressPayer:'',\n        \ttransportMode:'',\n        \toutorderPerson:'',\n        \toutorderRemark:''\n        })\n      },\n      delDelivery(index){\n      \tthis.orderXq.deliveryList.splice(index,1)\n      },\n\t\t\tdelProduct(index){\n\t\t\t\tthis.orderXq.productList.splice(index,1)\n\t\t\t},\n\t\t\taddOrderInfo(){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `../dingdan-info/dingdan-info?id=${this.id}&type=add`\n\t\t\t\t})\n\t\t\t},\n\t\t\teditOrderInfo(){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `../dingdan-info/dingdan-info?orderInfo=${JSON.stringify(this.orderXq)}&id=${this.id}&type=edit`\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 获取产品总价\n\t\t\tgetTotalAmount(item){\n\t\t\t\tif(item.unitPrice && item.amount){\n\t\t\t\t\tlet unitPrice = Number(item.unitPrice)\n\t\t\t\t\tlet amount = Number(item.amount)\n\t\t\t\t\tlet adjustAmount = Number(item.adjustAmount)\n\t\t\t\t\titem.totalAmount = unitPrice * amount + adjustAmount\n\t\t\t\t\treturn unitPrice * amount + adjustAmount\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n.order-xq-container{\n\theight: 100%;\n\twidth: 100%;\n\tpadding: 0px 20px 20px 20px;\n\tbox-sizing:border-box;\n\t.submit-btn{\n\t\t/deep/button{\n\t\t\tmargin: 20px 0px\n\t\t}\n\t}\n\t.order-info{\n\t\tmargin-top: 5px;\n\t\tpadding: 10px;\n\t\tbackground: white;\n\t\tborder-radius: 10px;\n\t\t.order-info-show{\n\t\t\tfont-size: 12px;\n\t\t\t.left{\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\theight: 50px;\n\t\t\t\t.order-logo{\n\t\t\t\t\theight: 30px;\n\t\t\t\t\twidth: 30px;\n\t\t\t\t\tbackground: black;\n\t\t\t\t\tborder-radius: 25px;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 30px;\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.middle{\n\t\t\t\t.van-row{\n\t\t\t\t\tline-height: 20px;\n\t\t\t\t}\n\t\t\t\t.info{\n\t\t\t\t\tcolor: #646566;\n\t\t\t\t\tp{\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\ttext-align: left;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t.right{\n\t\t\t\theight: 50px;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t}\n\t}\n  .outorder-detail-wraper{\n    padding-top: 20px;\n  }\n\t.inorder-detail-wraper{\n\t\tmargin-top: 10px;\n\t\theader{\n\t\t\ttext-align: center;\n\t\t\tfont-size: 16px;\n\t\t\theight: 40px;\n\t\t\tline-height: 40px;\n\t\t}\n\t\t.inorder-content{\n\t\t\toverflow: hidden;\n\t\t\tbackground: white;\n\t\t\tborder-radius: 10px;\n\t\t\tbox-shadow: 5px 5px 8px #f7f7f7;\n\t\t\t.product-info-content{\n\t\t\t\t.product-header{\n\t\t\t\t\tpadding: 8px 20px;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tbackground: #efefef;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n          align-items: center;\n          .edit-save-icon{\n            display: flex;\n          }\n\t\t\t\t\t.cross-icon{\n\t\t\t\t\t\t&:hover{\n\t\t\t\t\t\t\tcolor: #f56c6c;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-xq.vue?vue&type=style&index=0&id=1e216986&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order-xq.vue?vue&type=style&index=0&id=1e216986&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1623858677520\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}